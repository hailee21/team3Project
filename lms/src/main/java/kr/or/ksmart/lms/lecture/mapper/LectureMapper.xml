<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="kr.or.ksmart.lms.lecture.mapper.LectureMapper"> 
	<!-- LectureMapper InfoLecture resultMap  -->
	<resultMap id="infoLectureResultMap"
				type="kr.or.ksmart.lms.lecture.vo.InfoLecture">
		<result column="info_lecture_code" property="infoLectureCode"/>
		<result column="info_lecture_sort" property="infoLectureSort"/>
		<result column="info_lecture_name" property="infoLectureName"/>
		<result column="info_lecture_insert_date" property="infoLectureInsertDate"/>
	</resultMap>
	<!-- LectureMapper InfoSubject resultMap  -->
	<resultMap id="InfoSubjectMap"
				type="kr.or.ksmart.lms.subject.vo.InfoSubject">
		<result column="info_subject_code" property="infoSubjectCode"/>
		<result column="info_lecture_code" property="infoLectureCode"/>
		<result column="info_subject_name" property="infoSubjectName"/>
		<result column="info_subject_difficulty" property="infoSubjectDifficulty"/>
		<result column="info_subject_modification_history" property="infoSubjectModificationHistory"/>
	</resultMap>
	<!-- ClassroomMapper Institution resultMap  -->
	<resultMap id="InstitutionResultMap"
				type="kr.or.ksmart.lms.institution.vo.Institution">
		<result column="institution_code" property="institutionCode"/>
		<result column="institution_name" property="institutionName"/>
		<result column="institution_phone" property="InstitutionPhone"/>
		<result column="institution_postcode" property="InstitutionPostcode"/>
		<result column="institution_address" property="InstitutionAddress"/>
		<result column="institution_address_desc" property="InstitutionAddressDesc"/>
		<result column="institution_location" property="InstitutionLocation"/>
		<result column="institution_registration_date" property="InstitutionRegistrationDate"/>
	</resultMap>
	
	<!-- LectureCode을 입력받아 infoSubject 과목리스트 출력 / 비동기방식 -->
	<select id="selectSubjectListByLectureCode"
			parameterType="String"
			resultMap="InfoSubjectMap">
		SELECT
			info_subject_code
			, info_lecture_code
			, info_subject_name
			, info_subject_difficulty
		FROM 
			info_subject
		WHERE 
			info_lecture_code = #{lectureCode}
	</select>

	<!-- Lecture 강의표준명 리스트 출력 / 비동기방식 -->
	<select id="selectInfoLectureNameList" 
			parameterType="String"
			resultMap="infoLectureResultMap">
		SELECT
			info_lecture_code
			,info_lecture_name
		FROM 
			info_lecture
		WHERE 
			info_lecture_sort = #{lectureSort}
	</select>	 
		
	<!-- Lecture 강의분류 리스트 출력 -->
	<select id="selectInfoLectureSortList" 
			resultMap="infoLectureResultMap">
		SELECT distinct
			info_lecture_sort
		FROM 
			info_lecture
	</select>	
	
	<!-- 교육원 리스트 출력 -->
	<select id="selectInstitutionList"
			resultMap="InstitutionResultMap">
		SELECT 
			institution_code
			,institution_name
			,institution_phone
			,institution_postcode
			,institution_address
			,institution_address_desc
			,institution_location
			,institution_registration_date
		FROM institution		
	</select>
	
	<!-- 교육원 검색 -->
	<select id="selectInstitutionListByKeyword"
			parameterType="String"
			resultMap="InstitutionResultMap">
		SELECT 
			institution_code
			,institution_name
			,institution_location
		FROM 
			institution 
		WHERE 
			institution_location 
		LIKE 
			#{institutionName}
	</select>
</mapper>